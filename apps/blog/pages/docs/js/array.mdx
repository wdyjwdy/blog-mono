import { Callout } from 'nextra/components'
import { Table } from '@radix-ui/themes';

# Array
## Creating an Array
### literals
- **æè¿°**ï¼šåˆ›å»ºæ•°ç»„
```js
let arr = []        // []
let arr = [,,,]     // [empty Ã— 3]
let arr = [1, 2, 3] // [1, 2, 3]
```
### spread operator
- **æè¿°**ï¼šä»*å¯è¿­ä»£å¯¹è±¡*åˆ›å»ºæ•°ç»„
```js
[...'abc'] // ['a', 'b', 'c']
```
### Array()
- **æè¿°**ï¼šåˆ›å»ºæ•°ç»„
- **è¯­æ³•**ï¼š`Array(length){:js}`, `Array(...elements){:js}`
```js
Array()        // []
Array(3)       // [empty Ã— 3]
Array(1, 2, 3) // [1, 2, 3]
```
### of()
- **æè¿°**ï¼šåˆ›å»ºæ•°ç»„
- **è¯­æ³•**ï¼š`Array.of(...elements){:js}`
```js
Array.of()        // []
Array.of(3)       // [3]
Array.of(1, 2, 3) // [1, 2, 3]
```
<Callout type="info" emoji="ï¸ğŸ³">
è§£å†³äº† [Array()](#array) ä¸èƒ½åˆ›å»ºå•å…ƒç´ æ•°ç»„çš„é—®é¢˜
</Callout>
### from()
- **æè¿°**ï¼šä»*å¯è¿­ä»£å¯¹è±¡*æˆ–*ç±»æ•°ç»„*åˆ›å»ºæ•°ç»„
- **è¯­æ³•**ï¼š`Array.from(arrayLike, mapFn?, thisArg?){:js}`
```js
// å¯è¿­ä»£å¯¹è±¡
Array.from('hello') // ['h', 'e', 'l', 'l', 'o']

// ç±»æ•°ç»„
Array.from({ 0: 'a', 1: 'b', length: 2 }) // ['a', 'b']

// æ˜ å°„å‡½æ•°
Array.from('123', x => Number(x)) // [1, 2, 3]
```
## Accessing an Array
### subscript
- **æè¿°**ï¼šè®¿é—®ç´¢å¼•ä½ç½®å…ƒç´ 
```js
[1, 2, 3][0] // 1
```
### at()
- **æè¿°**ï¼šè®¿é—®ç´¢å¼•ä½ç½®å…ƒç´ 
- **è¯­æ³•**ï¼š`at(index){:js}`
```js
// positive index
[1, 2, 3].at(0)  // 1

// negative index
[1, 2, 3].at(-1) // 3
```
<Callout type="info" emoji="ï¸ğŸ³">
è§£å†³äº† [subscript](#subscript-operator) ä¸èƒ½è®¿é—®è´Ÿç´¢å¼•é—®é¢˜
</Callout>
## Modifying an Array
### push()
```mermaid
block-beta
  columns 1
  block:b1
    space:4 b("push")
  end
  block:b2
    A("A") B("B") C("C") D("D") E(" ")
  end
  b --> E
class a,b,b1 Text
class E Dash
class b2 Line
```
- **æè¿°**ï¼šæ·»åŠ å…ƒç´ åˆ°æ•°ç»„æœ«å°¾ï¼Œå¹¶è¿”å›æ–°æ•°ç»„é•¿åº¦
- **è¯­æ³•**ï¼š`push(...elements){:js}`
- **æ—¶é—´**ï¼š$O(1)$
```js
[1, 2].push(3)    // Return 3, Array is [1, 2, 3]
[1, 2].push(3, 4) // Return 4, Array is [1, 2, 3, 4]
```
### pop()
```mermaid
block-beta
  columns 1
  block:b1
    space:3 a("pop")
  end
  block:b2
    A("A") B("B") C("C") D("D")
  end
  D --> a
class a,b,b1 Text
class b2 Line
class D Red
```
- **æè¿°**ï¼šåˆ é™¤æ•°ç»„æœ«å°¾å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ 
- **è¯­æ³•**ï¼š`pop(){:js}`
- **æ—¶é—´**ï¼š$O(1)$
```js
[1, 2].pop() // Return 2, Array is [1]
```
### unshift
```mermaid
block-beta
  columns 1
  block:b1
    b("unshift") space:4
  end
  block:b2
     E(" ") A("A") B("B") C("C") D("D")
  end
  b --> E
class a,b,b1 Text
class E Dash
class b2 Line
```
- **æè¿°**ï¼šæ·»åŠ å…ƒç´ åˆ°æ•°ç»„å¼€å¤´ï¼Œå¹¶è¿”å›æ–°æ•°ç»„é•¿åº¦
- **è¯­æ³•**ï¼š`unshift(...elements){:js}`
- **æ—¶é—´**ï¼š$O(n)$
```js
[2, 3].unshift(1)    // Return 3, Array is [1, 2, 3]
[2, 3].unshift(0, 1) // Return 4, Array is [0, 1, 2, 3]
```
### shift()
```mermaid
block-beta
  columns 1
  block:b1
    a("shift") space:3
  end
  block:b2
    A("A") B("B") C("C") D("D")
  end
  A --> a
class a,b,b1 Text
class b2 Line
class A Red
```
- **æè¿°**ï¼šåˆ é™¤æ•°ç»„å¼€å¤´å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ 
- **è¯­æ³•**ï¼š`shift(){:js}`
- **æ—¶é—´**ï¼š$O(1)$
```js
[1, 2].shift() // Return 1, Array is [2]
```
### splice()
- **æè¿°**ï¼šä¿®æ”¹æ•°ç»„ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´ 
- **è¯­æ³•**ï¼š`splice(start, deleteCount?, ...elements){:js}`
	- `start{:js}`ï¼šæ“ä½œä½ç½®
  - `deleteCount=Infinity{:js}`ï¼šåˆ é™¤å…ƒç´ çš„ä¸ªæ•°
  - `elements{:js}`ï¼šæ’å…¥çš„å…ƒç´ 
- **æ—¶é—´**ï¼š$O(n)$
```js
// remove
[1, 2, 3].splice(1)    // Return [2, 3], Array is [1]
[1, 2, 3].splice(1, 1) // Return [2], Array is [1, 3]

// insert
[1, 2, 3].splice(1, 0, 'a')      // Return [], Array is [1, 'a', 2, 3]
[1, 2, 3].splice(1, 0, 'a', 'b') // Return [], Array is [1, 'a', 'b', 2, 3]

// remove and insert
[1, 2, 3].splice(1, 2, 'a', 'b') // Return [2, 3], Array is [1, 'a', 'b']
```
## Iterating an Array
<Table.Root variant="surface">
  <Table.Header>
    <Table.Row>
      <Table.ColumnHeaderCell><></></Table.ColumnHeaderCell>
      <Table.ColumnHeaderCell align='center'>for loop</Table.ColumnHeaderCell>
      <Table.ColumnHeaderCell align='center'>for of loop</Table.ColumnHeaderCell>
      <Table.ColumnHeaderCell align='center'>forEach</Table.ColumnHeaderCell>
    </Table.Row>
  </Table.Header>

  <Table.Body>
    <Table.Row>
      <Table.Cell>continue</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
    </Table.Row>

    <Table.Row>
      <Table.Cell>break</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
    </Table.Row>
    
    <Table.Row>
      <Table.Cell>return</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
    </Table.Row>

    <Table.Row>
      <Table.Cell>skip</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
    </Table.Row>

    <Table.Row>
      <Table.Cell>hole</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
      <Table.Cell align='center'>âŒ</Table.Cell>
      <Table.Cell align='center'>âœ…</Table.Cell>
    </Table.Row>
  </Table.Body>
</Table.Root>
### for loop
- **æè¿°**ï¼šéå†æ•°ç»„
```js
let arr = [1, 2, 3]
for (let i = 0; i < arr.length; i++) {
  console.log(arr[i])
}
```
### for of loop
- **æè¿°**ï¼šéå†æ•°ç»„
```js
let arr = [1, 2, 3]
for (let val of arr) {
  console.log(val)
}
```
### forEach()
- **æè¿°**ï¼šéå†æ•°ç»„
- **è¯­æ³•**ï¼š`forEach(fn(v, i, a), thisArg?){:js}`
```js
let arr = [1, 2, 3]
arr.forEach((x) => {
  console.log(x)
})
```
## Transforming an Array
### map()
```mermaid
block-beta
  columns 3
  block:b1
   x("x") y("y") z("z")
  end
  space
  block:b2
   fx("f(x)") fy("f(y)") fz("f(z)")
  end
b1 --> b2
class b1,b2 Line
```
- **æè¿°**ï¼šæ˜ å°„æ•°ç»„å…ƒç´ 
- **è¯­æ³•**ï¼š`map(fn(v, i, a), thisArg?){:js}`
```js
// åŸºæœ¬
[1, 2, 3].map((x) => x * 2)      // [2, 4, 6]
[1, 2, 3].map((x, i) => i)       // [0, 1, 2]
[1, 2, 3].map((x, i, a) => a[0]) // [1, 1, 1]

// è·³è¿‡ç©ºæ§½
[1,  , 3].map(x => x) // [1, empty, 3]

// ç±»æ•°ç»„
let arrayLike = { 0: 'a', 1: 'b', length: 2 }
Array.prototype.map.call(arrayLike, x => x) // ['a', 'b']
```
### filter()
```mermaid
block-beta
  columns 6
  block:b1:2
   x("x") y("y") z("z")
  end
  space:2
  block:b2:2
   fx("x") fy(" ") fz(" ")
  end
b1 --> b2
class b1,b2 Line
class fy,fz Dash
```
- **æè¿°**ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†æ»¡è¶³æ¡ä»¶çš„å€¼
- **è¯­æ³•**ï¼š`filter(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].filter(x => x > 0) // [1, 2, 3]
```
### reduce()
```mermaid
block-beta
  columns 6
  block:b1:2
   x("x") y("y") z("z")
  end
  space:2
  block:b2:2
   a("f(f(x, y), z)")
  end
b1 --> a
class b1 Line
class b2 Text
```
- **æè¿°**ï¼šåˆå¹¶æ•°ç»„å…ƒç´ 
- **è¯­æ³•**ï¼š`reduce(fn(p, v, i, a), initialValue?){:js}`
```js
// åŸºç¡€
[1, 2, 3].reduce((a, b) => a + b)     // 6
[1, 2, 3].reduce((a, b) => a + b, 10) // 16

// è·³è¿‡ç©ºæ§½
[1,  , 3].reduce((a, b) => a + b) // 4
```
### flat()
```mermaid
block-beta
  columns 3
  block:b1
   x("1") y("2") z("[3, 4]")
  end
  space
  block:b2
   a("1") b("2") c("3") d("4")
  end
b1 --> b2
class b1,b2 Line
class z Red
```
- **æè¿°**ï¼šåŸåœ°å±•å¹³æ•°ç»„ï¼Œå¹¶è¿”å›æ–°æ•°ç»„
- **è¯­æ³•**ï¼š`flat(depth?){:js}`
```js
[1, [2, [3]]].flat(1) // [1, 2, [3]]
[1, [2, [3]]].flat(2) // [1, 2, 3]
```
### flatMap()
```mermaid
block-beta
  columns 6
  block:b1:1
   a("1") b("2")
  end
  space
  block:b2:1
   c("[1, 1]") d("[2, 2]")
  end
  space
  block:b3:2
   e("1") f("1") g("2") h("2")
  end
b1 --> b2
b2 --> b3
class b1,b2,b3 Line
```
- **æè¿°**ï¼šæ˜ å°„æ•°ç»„å…ƒç´ ï¼Œç„¶åå±•å¹³ä¸€å±‚
- **è¯­æ³•**ï¼š`flatMap(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].flatMap(x => [x, x]) // [1, 1, 2, 2, 3, 3]
```
## Searching an Array
### find()
- **æè¿°**ï¼šè¿”å›é¦–ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ 
- **è¯­æ³•**ï¼š`find(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].find(x => x > 0) // 1
[1, 2, 3].find(x => x < 0) // undefined
```
### findIndex()
- **æè¿°**ï¼šè¿”å›é¦–ä¸ªæ»¡è¶³æ¡ä»¶å…ƒç´ çš„ç´¢å¼•
- **è¯­æ³•**ï¼š`findIndex(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].findIndex(x => x > 0) // 0
[1, 2, 3].findIndex(x => x < 0) // -1
```
### indexOf()
- **æè¿°**ï¼šè¿”å›å…ƒç´ é¦–æ¬¡å‡ºç°çš„ç´¢å¼•
- **è¯­æ³•**ï¼š`indexOf(value, start?){:js}`
```js
[1, 2, 3].indexOf(1) // 0
[1, 2, 3].indexOf(0) // -1
```
### includes()
- **æè¿°**ï¼šæ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ 
- **è¯­æ³•**ï¼š`includes(value, start?){:js}`
```js
[1, 2, 3].includes(1) // true
[1, 2, 3].includes(0) // false
```
### every()
```mermaid
block-beta
  columns 3
  block:b1
   x("x") y("y") z("z")
  end
  space
  block:b2
   a("f(x) and f(y) and f(z)")
  end
b1 --> a
class b1 Line
class b2 Text
```
- **æè¿°**ï¼šæ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶
- **è¯­æ³•**ï¼š`every(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].every(x => x > 0) // true
```
### some()
```mermaid
block-beta
  columns 3
  block:b1
   x("x") y("y") z("z")
  end
  space
  block:b2
   a("f(x) or f(y) or f(z)")
  end
b1 --> a
class b1 Line
class b2 Text
```
- **æè¿°**ï¼šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶
- **è¯­æ³•**ï¼š`some(fn(v, i, a), thisArg?){:js}`
```js
[1, 2, 3].some(x => x < 0) // false
```
## Sorting an Array
### sort()
- **æè¿°**ï¼šåŸåœ°æ’åºæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„
- **è¯­æ³•**ï¼š`sort(compareFn?){:js}`
- **å‚æ•°**
	- `compareFn(a, b){:js}`ï¼šæ’åºå‡½æ•°ï¼Œé»˜è®¤ä¼šè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ŒæŒ‰ UTF-16 ç æ’åº
        - `f(a, b) < 0`ï¼ša åœ¨å‰
        - `f(a, b) === 0`ï¼šé¡ºåºä¸å˜
```js
[1, 2, 10].sort() // [1, 10, 2]
[1, 2, 10].sort((a, b) => a - b) // [1, 2, 10]
```
### reverse()
- **æè¿°**ï¼šåŸåœ°åè½¬æ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„
- **è¯­æ³•**ï¼š`reverse(){:js}`
```js
[1, 2, 3].reverse() // [3, 2, 1]
```
## Enumerating an Array
### keys()
- **æè¿°**ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«å…ƒç´ çš„é”®
- **è¯­æ³•**ï¼š`keys(){:js}`
```js
[1, 2, 3].keys() // Iterator is [0, 1, 2]
```
### values()
- **æè¿°**ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«å…ƒç´ çš„å€¼
- **è¯­æ³•**ï¼š`values(){:js}`
```js
[1, 2, 3].values() // Iterator is [1, 2, 3]
```
### entries()
- **æè¿°**ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«å…ƒç´ çš„é”®å€¼å¯¹
- **è¯­æ³•**ï¼š`entries(){:js}`
```js
[1, 2, 3].entries() // Iterator is [[0, 1], [1, 2], [2, 3]]
```
## Copying an Array
### slice()
```mermaid
block-beta
  columns 1
  block:b1
    space a("start") space:2 b("end")
  end
  block:b2
    A("A") B("B") C("C") D("D") E("E")
  end
  a --> B
  b --> E
class a,b,b1,b2 Text
class B,C,D Red
```
- **æè¿°**ï¼šè¿”å›æ‹·è´åçš„æ•°ç»„
- **è¯­æ³•**ï¼š`slice(start?, end?){:js}`
```js
[1, 2, 3].slice()     // [1, 2, 3]
[1, 2, 3].slice(1)    // [2, 3]
[1, 2, 3].slice(1, 2) // [2]
```
### concat()
- **æè¿°**ï¼šè¿”å›æ‹¼æ¥åçš„æ•°ç»„
- **è¯­æ³•**ï¼š`concat(...elements){:js}`
```js
// åŸºç¡€
[1, 2].concat()     // [1, 2]
[1, 2].concat(3, 4) // [1, 2, 3, 4]

// è‡ªåŠ¨å±•å¹³ä¸€å±‚
[1, 2].concat([3], [4]) // [1, 2, 3, 4]
```
## Checking an Array
### isArray()
- **æè¿°**ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„
- **è¯­æ³•**ï¼š`Array.isArray(value){:js}`
```js
Array.isArray([]) // true
```
### prototype
- **æè¿°**ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„
```js
[] instanceof Array // true
[].constructor === Array // true
```
### toString
- **æè¿°**ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„
```js
Object.prototype.toString.call([]).slice(8,-1) === 'Array' // true
```